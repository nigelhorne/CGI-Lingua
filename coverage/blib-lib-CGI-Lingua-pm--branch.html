<!DOCTYPE html
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="https://www.w3.org/1999/xhtml">
<!--
This file was generated by Devel::Cover Version 1.51
Devel::Cover is copyright 2001-2025, Paul Johnson (paul@pjcj.net)
Devel::Cover is free. It is licensed under the same terms as Perl itself.
The latest version of Devel::Cover should be available from my homepage:
https://pjcj.net
-->
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
    <meta http-equiv="Content-Language" content="en-us"></meta>
    <link rel="stylesheet" type="text/css" href="cover.css"></link>
    <link rel="stylesheet" type="text/css" href="cover.css"></link>
    <title>Branch Coverage: blib/lib/CGI/Lingua.pm</title>
</head>
<body>
<h1>Branch Coverage</h1>
<table>
<tr><td class="h" align="right">File:</td><td align="left">blib/lib/CGI/Lingua.pm</td></tr>
<tr><td class="h" align="right">Coverage:</td><td align="left" class="c0">30.4%</td></tr>
</table>
<div><br/></div>
<table>
<tr><th>line</th><th>%</th><th colspan="2">coverage</th><th>branch</th></tr>
<tr><td class="h"><a id="L164">164</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if (not defined $class) { }</td></tr>
<tr><td class="h"></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">elsif (ref $class) { }</td></tr>
<tr><td class="h"><a id="L165">165</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if ($params)</td></tr>
<tr><td class="h"><a id="L167">167</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if (my $logger = $$params{&quot;logger&quot;})</td></tr>
<tr><td class="h"><a id="L183">183</a></td><td class="c0">50</td><td class="c3">T</td><td class="c0">F</td><td class="s">if (defined $$params{&quot;logger&quot;})</td></tr>
<tr><td class="h"><a id="L184">184</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">unless (&amp;Scalar::Util::blessed($$params{&quot;logger&quot;}) and $$params{&quot;logger&quot;}-&gt;can(&quot;warn&quot;) and $$params{&quot;logger&quot;}-&gt;can(&quot;info&quot;) and $$params{&quot;logger&quot;}-&gt;can(&quot;error&quot;))</td></tr>
<tr><td class="h"><a id="L194">194</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">unless ($$params{&quot;supported&quot;})</td></tr>
<tr><td class="h"><a id="L195">195</a></td><td class="c0">50</td><td class="c3">T</td><td class="c0">F</td><td class="s">if (my $logger = $$params{&quot;logger&quot;})</td></tr>
<tr><td class="h"><a id="L204">204</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if ($cache and $ENV{&quot;REMOTE_ADDR&quot;})</td></tr>
<tr><td class="h"><a id="L207">207</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if ($info and $l = $info-&gt;lang) { }</td></tr>
<tr><td class="h"></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">elsif ($l = $class-&gt;_what_language) { }</td></tr>
<tr><td class="h"><a id="L216">216</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if (my $rc = $cache-&gt;get($key))</td></tr>
<tr><td class="h"><a id="L230">230</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if ($$rc{&#39;_what_language&#39;} || $$rc{&#39;_rlanguage&#39;} and $info and $info-&gt;lang)</td></tr>
<tr><td class="h"><a id="L262">262</a></td><td class="c0">50</td><td class="c3">T</td><td class="c0">F</td><td class="s">if (defined $^V and $^V ge &quot;v5.14.0&quot;)</td></tr>
<tr><td class="h"><a id="L263">263</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if ${^GLOBAL_PHASE} eq &quot;DESTRUCT&quot;</td></tr>
<tr><td class="h"><a id="L265">265</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">unless ($ENV{&quot;REMOTE_ADDR&quot;})</td></tr>
<tr><td class="h"><a id="L269">269</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">unless ref $self</td></tr>
<tr><td class="h"><a id="L272">272</a></td><td class="c0">50</td><td class="c3">T</td><td class="c0">F</td><td class="s">unless $cache</td></tr>
<tr><td class="h"><a id="L275">275</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if (my $l = $self-&gt;_what_language)</td></tr>
<tr><td class="h"><a id="L279">279</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if $cache-&gt;get($key)</td></tr>
<tr><td class="h"><a id="L334">334</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">unless ($$self{&quot;_slanguage&quot;})</td></tr>
<tr><td class="h"><a id="L379">379</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">unless ($$self{&quot;_slanguage&quot;})</td></tr>
<tr><td class="h"><a id="L400">400</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">unless ($$self{&quot;_slanguage&quot;})</td></tr>
<tr><td class="h"><a id="L429">429</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">unless ($$self{&quot;_slanguage&quot;})</td></tr>
<tr><td class="h"><a id="L449">449</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">unless ($$self{&quot;_rlanguage&quot;})</td></tr>
<tr><td class="h"><a id="L472">472</a></td><td class="c0">50</td><td class="c3">T</td><td class="c0">F</td><td class="s">if (defined $http_accept_language)</td></tr>
<tr><td class="h"><a id="L475">475</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if ($http_accept_language eq &quot;en-uk&quot;)</td></tr>
<tr><td class="h"><a id="L481">481</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if (not $_[0] =~ /^Use of uninitialized value/)</td></tr>
<tr><td class="h"><a id="L488">488</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">if ($l and $http_accept_language =~ /-/ and not $http_accept_language =~ qr/$l/i)</td></tr>
<tr><td class="h"><a id="L497">497</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">unless ($l)</td></tr>
<tr><td class="h"><a id="L508">508</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">if ($i18n-&gt;accepts($1, $$self{&quot;_supported&quot;}))</td></tr>
<tr><td class="h"><a id="L515">515</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">unless ($l)</td></tr>
<tr><td class="h"><a id="L519">519</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">if $possible =~ /..\-../</td></tr>
<tr><td class="h"><a id="L522">522</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">if ($i18n-&gt;accepts($possible, $$self{&quot;_supported&quot;}))</td></tr>
<tr><td class="h"><a id="L531">531</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">if ($l) { }</td></tr>
<tr><td class="h"></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">elsif ($http_accept_language =~ /;/) { }</td></tr>
<tr><td class="h"><a id="L534">534</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">if (not $l =~ /^..-..$/) { }</td></tr>
<tr><td class="h"></td><td class="c0">50</td><td class="c3">T</td><td class="c0">F</td><td class="s">elsif ($l =~ /(.+)-(..)$/) { }</td></tr>
<tr><td class="h"><a id="L536">536</a></td><td class="c0">50</td><td class="c3">T</td><td class="c0">F</td><td class="s">if ($$self{&quot;_slanguage&quot;})</td></tr>
<tr><td class="h"><a id="L547">547</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">if ($http_accept_language =~ /..-(..)$/) { }</td></tr>
<tr><td class="h"></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">elsif ($http_accept_language =~ /..-([a-z]{2,3})$/i) { }</td></tr>
<tr><td class="h"><a id="L550">550</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">unless defined $requested_sublanguage</td></tr>
<tr><td class="h"><a id="L554">554</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">if ($sl) { }</td></tr>
<tr><td class="h"></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">elsif ($requested_sublanguage) { }</td></tr>
<tr><td class="h"><a id="L560">560</a></td><td class="c0">50</td><td class="c3">T</td><td class="c0">F</td><td class="s">if (my $c = $self-&gt;_code2countryname($requested_sublanguage)) { }</td></tr>
<tr><td class="h"><a id="L574">574</a></td><td class="c0">50</td><td class="c3">T</td><td class="c0">F</td><td class="s">if ($accepts)</td></tr>
<tr><td class="h"><a id="L577">577</a></td><td class="c0">50</td><td class="c3">T</td><td class="c0">F</td><td class="s">if ($accepts =~ /\-/) { }</td></tr>
<tr><td class="h"><a id="L581">581</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if ($$self{&quot;_cache&quot;})</td></tr>
<tr><td class="h"><a id="L584">584</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if ($from_cache) { }</td></tr>
<tr><td class="h"><a id="L590">590</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if ($$self{&quot;_slanguage&quot;})</td></tr>
<tr><td class="h"><a id="L591">591</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if ($variety eq &quot;uk&quot;)</td></tr>
<tr><td class="h"><a id="L598">598</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if (defined(my $c = $self-&gt;_code2countryname($variety)))</td></tr>
<tr><td class="h"><a id="L603">603</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if ($$self{&quot;_sublanguage&quot;})</td></tr>
<tr><td class="h"><a id="L608">608</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">unless ($from_cache)</td></tr>
<tr><td class="h"><a id="L619">619</a></td><td class="c0">50</td><td class="c3">T</td><td class="c0">F</td><td class="s">if ($accepts)</td></tr>
<tr><td class="h"><a id="L625">625</a></td><td class="c0">50</td><td class="c3">T</td><td class="c0">F</td><td class="s">if ($variety =~ /[a-z]{2,3}/ and not defined $$self{&quot;_sublanguage&quot;})</td></tr>
<tr><td class="h"><a id="L629">629</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if ($variety eq &quot;uk&quot;)</td></tr>
<tr><td class="h"><a id="L638">638</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if ($$self{&quot;_cache&quot;})</td></tr>
<tr><td class="h"><a id="L641">641</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if (defined $from_cache) { }</td></tr>
<tr><td class="h"><a id="L655">655</a></td><td class="c0">50</td><td class="c3">T</td><td class="c0">F</td><td class="s">if (defined $results[0]) { }</td></tr>
<tr><td class="h"><a id="L663">663</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if ($@ or not defined $language_name) { }</td></tr>
<tr><td class="h"><a id="L664">664</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if $@</td></tr>
<tr><td class="h"><a id="L673">673</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if ($$self{&quot;_cache&quot;} and not defined $from_cache)</td></tr>
<tr><td class="h"><a id="L679">679</a></td><td class="c0">50</td><td class="c3">T</td><td class="c0">F</td><td class="s">if (defined $$self{&quot;_sublanguage&quot;})</td></tr>
<tr><td class="h"><a id="L691">691</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if ($$self{&quot;_slanguage&quot;} and $$self{&quot;_slanguage&quot;} ne &quot;Unknown&quot;)</td></tr>
<tr><td class="h"><a id="L692">692</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if ($$self{&quot;_rlanguage&quot;} eq &quot;Unknown&quot;)</td></tr>
<tr><td class="h"><a id="L695">695</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if ($$self{&quot;_rlanguage&quot;})</td></tr>
<tr><td class="h"><a id="L696">696</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if ($l = $self-&gt;_code2language($$self{&quot;_rlanguage&quot;}))</td></tr>
<tr><td class="h"><a id="L707">707</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">if (!$$self{&#39;_rlanguage&#39;} || $$self{&#39;_rlanguage&#39;} eq &#39;Unknown&#39; and length $http_accept_language == 2 || $http_accept_language =~ /^..-..$/)</td></tr>
<tr><td class="h"><a id="L711">711</a></td><td class="c0">50</td><td class="c3">T</td><td class="c0">F</td><td class="s">unless ($$self{&quot;_rlanguage&quot;})</td></tr>
<tr><td class="h"><a id="L718">718</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if ($$self{&quot;_dont_use_ip&quot;})</td></tr>
<tr><td class="h"><a id="L727">727</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">if (not defined $country and my $c = $self-&gt;_what_language)</td></tr>
<tr><td class="h"><a id="L728">728</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if ($c =~ /^(..)_(..)/) { }</td></tr>
<tr><td class="h"></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">elsif ($c =~ /^(..)$/) { }</td></tr>
<tr><td class="h"><a id="L735">735</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">if (defined $country)</td></tr>
<tr><td class="h"><a id="L740">740</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if ($$self{&quot;_cache&quot;})</td></tr>
<tr><td class="h"><a id="L745">745</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if ($from_cache) { }</td></tr>
<tr><td class="h"><a id="L750">750</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if ($l)</td></tr>
<tr><td class="h"><a id="L752">752</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if (defined $l)</td></tr>
<tr><td class="h"><a id="L755">755</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if ($language_name)</td></tr>
<tr><td class="h"><a id="L762">762</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if ($language_name)</td></tr>
<tr><td class="h"><a id="L763">763</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if (not defined $$self{&quot;_rlanguage&quot;} or $$self{&quot;_rlanguage&quot;} eq &quot;Unknown&quot;)</td></tr>
<tr><td class="h"><a id="L766">766</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">unless (exists $self-&gt;{&#39;_slanguage&#39;} and $$self{&quot;_slanguage&quot;} ne &quot;Unknown&quot;)</td></tr>
<tr><td class="h"><a id="L771">771</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if ($language_name and $language_code2 and not defined $http_accept_language) { }</td></tr>
<tr><td class="h"><a id="L779">779</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">unless ($code)</td></tr>
<tr><td class="h"><a id="L780">780</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if ($http_accept_language and $http_accept_language ne $$self{&quot;_rlanguage&quot;})</td></tr>
<tr><td class="h"><a id="L785">785</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">unless ($code)</td></tr>
<tr><td class="h"><a id="L788">788</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if ($$self{&quot;_rlanguage&quot;} =~ /(.+)\s\(.+/)</td></tr>
<tr><td class="h"><a id="L789">789</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if (not defined $http_accept_language or $1 ne $$self{&quot;_rlanguage&quot;})</td></tr>
<tr><td class="h"><a id="L795">795</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">unless ($code)</td></tr>
<tr><td class="h"><a id="L803">803</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if ($code)</td></tr>
<tr><td class="h"><a id="L805">805</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if ($$self{&#39;_slanguage&#39;}) { }</td></tr>
<tr><td class="h"><a id="L814">814</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if (not defined $$self{&#39;_slanguage_code_alpha2&#39;}) { }</td></tr>
<tr><td class="h"></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">elsif (not defined $from_cache and $$self{&#39;_cache&#39;} and defined $$self{&#39;_slanguage_code_alpha2&#39;}) { }</td></tr>
<tr><td class="h"><a id="L852">852</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">/^(.+)-/ ? :</td></tr>
<tr><td class="h"><a id="L854">854</a></td><td class="c0">50</td><td class="c3">T</td><td class="c0">F</td><td class="s">if (exists $base_languages{$language_string})</td></tr>
<tr><td class="h"><a id="L864">864</a></td><td class="c0">50</td><td class="c3">T</td><td class="c0">F</td><td class="s">if (ref $self)</td></tr>
<tr><td class="h"><a id="L866">866</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">if ($$self{&quot;_what_language&quot;})</td></tr>
<tr><td class="h"><a id="L870">870</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if (my $info = $$self{&quot;_info&quot;})</td></tr>
<tr><td class="h"><a id="L871">871</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if (my $rc = $info-&gt;lang)</td></tr>
<tr><td class="h"><a id="L879">879</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">if (my $rc = $ENV{&quot;HTTP_ACCEPT_LANGUAGE&quot;})</td></tr>
<tr><td class="h"><a id="L880">880</a></td><td class="c0">50</td><td class="c3">T</td><td class="c0">F</td><td class="s">if (ref $self)</td></tr>
<tr><td class="h"><a id="L886">886</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if (defined $ENV{&quot;LANG&quot;})</td></tr>
<tr><td class="h"><a id="L889">889</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if (ref $self)</td></tr>
<tr><td class="h"><a id="L915">915</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if ($$self{&quot;_country&quot;})</td></tr>
<tr><td class="h"><a id="L921">921</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if (defined $ENV{&quot;GEOIP_COUNTRY_CODE&quot;})</td></tr>
<tr><td class="h"><a id="L925">925</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">if ($ENV{&quot;HTTP_CF_IPCOUNTRY&quot;} and $ENV{&quot;HTTP_CF_IPCOUNTRY&quot;} ne &quot;XX&quot;)</td></tr>
<tr><td class="h"><a id="L933">933</a></td><td class="c0">50</td><td class="c3">T</td><td class="c0">F</td><td class="s">unless defined $ip</td></tr>
<tr><td class="h"><a id="L938">938</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">unless (is_ipv4($ip))</td></tr>
<tr><td class="h"><a id="L940">940</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if ($ip eq &#39;::1&#39;) { }</td></tr>
<tr><td class="h"></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">elsif (not is_ipv6($ip)) { }</td></tr>
<tr><td class="h"><a id="L950">950</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if (is_private_ip($ip))</td></tr>
<tr><td class="h"><a id="L954">954</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if (is_loopback_ip($ip))</td></tr>
<tr><td class="h"><a id="L959">959</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if ($$self{&quot;_cache&quot;})</td></tr>
<tr><td class="h"><a id="L961">961</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if (defined $$self{&quot;_country&quot;})</td></tr>
<tr><td class="h"><a id="L962">962</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if (not $$self{&#39;_country&#39;} =~ /\D/) { }</td></tr>
<tr><td class="h"><a id="L974">974</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if ($$self{&quot;_have_ipcountry&quot;} == -1)</td></tr>
<tr><td class="h"><a id="L975">975</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if (eval {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;do {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;require IP::Country
}
}) { }</td></tr>
<tr><td class="h"><a id="L985">985</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if ($$self{&quot;_have_ipcountry&quot;})</td></tr>
<tr><td class="h"><a id="L987">987</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if ($$self{&#39;_country&#39;}) { }</td></tr>
<tr><td class="h"></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">elsif (is_ipv4($ip)) { }</td></tr>
<tr><td class="h"><a id="L994">994</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">unless (defined $$self{&quot;_country&quot;})</td></tr>
<tr><td class="h"><a id="L995">995</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if ($$self{&quot;_have_geoip&quot;} == -1)</td></tr>
<tr><td class="h"><a id="L998">998</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if ($$self{&quot;_have_geoip&quot;} == 1)</td></tr>
<tr><td class="h"><a id="L1001">1001</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">unless (defined $$self{&quot;_country&quot;})</td></tr>
<tr><td class="h"><a id="L1002">1002</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if ($$self{&quot;_have_geoipfree&quot;} == -1)</td></tr>
<tr><td class="h"><a id="L1006">1006</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if ($@) { }</td></tr>
<tr><td class="h"><a id="L1014">1014</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if ($$self{&quot;_have_geoipfree&quot;} == 1)</td></tr>
<tr><td class="h"><a id="L1015">1015</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if (my $country = ($$self{&quot;_geoipfree&quot;}-&gt;LookUp($ip))[0])</td></tr>
<tr><td class="h"><a id="L1021">1021</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if ($$self{&quot;_country&quot;} and $$self{&quot;_country&quot;} eq &quot;eu&quot;)</td></tr>
<tr><td class="h"><a id="L1024">1024</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if (not $$self{&quot;_country&quot;} and eval {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;do {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;require LWP::Simple::WithCache;
require JSON::Parse
}
})</td></tr>
<tr><td class="h"><a id="L1031">1031</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if (my $data = LWP::Simple::WithCache::get(&quot;http://www.geoplugin.net/json.gp?ip=$ip&quot;))</td></tr>
<tr><td class="h"><a id="L1035">1035</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">unless ($$self{&quot;_country&quot;})</td></tr>
<tr><td class="h"><a id="L1050">1050</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">unless ($@ or not defined $whois or ref $whois ne &quot;HASH&quot;)</td></tr>
<tr><td class="h"><a id="L1051">1051</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if (defined $$whois{&#39;Country&#39;}) { }</td></tr>
<tr><td class="h"></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">elsif (defined $$whois{&#39;country&#39;}) { }</td></tr>
<tr><td class="h"><a id="L1056">1056</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if ($$self{&quot;_country&quot;})</td></tr>
<tr><td class="h"><a id="L1057">1057</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if ($$self{&#39;_country&#39;} eq &#39;EU&#39;) { }</td></tr>
<tr><td class="h"></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">elsif ($$self{&#39;_country&#39;} eq &#39;US&#39; and defined $$whois{&#39;StateProv&#39;} and $$whois{&#39;StateProv&#39;} eq &#39;PR&#39;) { }</td></tr>
<tr><td class="h"><a id="L1066">1066</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if ($$self{&#39;_country&#39;}) { }</td></tr>
<tr><td class="h"><a id="L1078">1078</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">unless ($@)</td></tr>
<tr><td class="h"><a id="L1084">1084</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if ($$self{&quot;_country&quot;})</td></tr>
<tr><td class="h"><a id="L1087">1087</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if ($$self{&quot;_country&quot;} =~ /^(..)\s*#/)</td></tr>
<tr><td class="h"><a id="L1095">1095</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if ($$self{&quot;_country&quot;})</td></tr>
<tr><td class="h"><a id="L1096">1096</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if (not $$self{&#39;_country&#39;} =~ /\D/) { }</td></tr>
<tr><td class="h"><a id="L1101">1101</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if ($$self{&#39;_country&#39;} eq &#39;hk&#39;) { }</td></tr>
<tr><td class="h"></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">elsif ($$self{&#39;_country&#39;} eq &#39;eu&#39;) { }</td></tr>
<tr><td class="h"><a id="L1110">1110</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if (subnet_matcher(&#39;185.10.104.0/22&#39;)-&gt;($ip)) { }</td></tr>
<tr><td class="h"><a id="L1121">1121</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if (not $$self{&#39;_country&#39;} =~ /\D/) { }</td></tr>
<tr><td class="h"></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">elsif ($$self{&#39;_cache&#39;}) { }</td></tr>
<tr><td class="h"><a id="L1140">1140</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if ($^O eq &#39;MSWin32&#39; and -r &#39;c:/GeoIP/GeoIP.dat&#39; or (-r &#39;/usr/local/share/GeoIP/GeoIP.dat&#39; or -r &#39;/usr/share/GeoIP/GeoIP.dat&#39;)) { }</td></tr>
<tr><td class="h"><a id="L1145">1145</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if ($@) { }</td></tr>
<tr><td class="h"><a id="L1150">1150</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if (-r &#39;/usr/share/GeoIP/GeoIP.dat&#39;) { }</td></tr>
<tr><td class="h"><a id="L1182">1182</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if ($$self{&quot;_locale&quot;})</td></tr>
<tr><td class="h"><a id="L1190">1190</a></td><td class="c0">50</td><td class="c3">T</td><td class="c0">F</td><td class="s">if (defined $agent and $agent =~ /\((.+)\)/)</td></tr>
<tr><td class="h"><a id="L1196">1196</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if ($candidate =~ /^[a-zA-Z]{2}-([a-zA-Z]{2})$/)</td></tr>
<tr><td class="h"><a id="L1198">1198</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if (my $c = $self-&gt;_code2country($1))</td></tr>
<tr><td class="h"><a id="L1206">1206</a></td><td class="c0">50</td><td class="c3">T</td><td class="c0">F</td><td class="s">if (eval {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;do {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;require HTTP::BrowserDetect
}
})</td></tr>
<tr><td class="h"><a id="L1210">1210</a></td><td class="c0">50</td><td class="c3">T</td><td class="c0">F</td><td class="s">if ($browser and $browser-&gt;country and my $c = $self-&gt;_code2country($browser-&gt;country))</td></tr>
<tr><td class="h"><a id="L1220">1220</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if ($country)</td></tr>
<tr><td class="h"><a id="L1228">1228</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">unless ($@)</td></tr>
<tr><td class="h"><a id="L1229">1229</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if ($c)</td></tr>
<tr><td class="h"><a id="L1237">1237</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if (defined $ENV{&quot;GEOIP_COUNTRY_CODE&quot;})</td></tr>
<tr><td class="h"><a id="L1240">1240</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if ($c)</td></tr>
<tr><td class="h"><a id="L1262">1262</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if ($$self{&quot;_timezone&quot;})</td></tr>
<tr><td class="h"><a id="L1267">1267</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if (my $ip = $ENV{&#39;REMOTE_ADDR&#39;}) { }</td></tr>
<tr><td class="h"><a id="L1268">1268</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if ($$self{&quot;_have_geoip&quot;} == -1)</td></tr>
<tr><td class="h"><a id="L1271">1271</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if ($$self{&quot;_have_geoip&quot;} == 1)</td></tr>
<tr><td class="h"><a id="L1276">1276</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">unless ($$self{&quot;_timezone&quot;})</td></tr>
<tr><td class="h"><a id="L1277">1277</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if (eval {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;do {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;require LWP::Simple::WithCache;
require JSON::Parse
}
}) { }</td></tr>
<tr><td class="h"><a id="L1283">1283</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if (my $data = LWP::Simple::WithCache::get(&quot;http://ip-api.com/json/$ip&quot;))</td></tr>
<tr><td class="h"><a id="L1287">1287</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if (my $logger = $$self{&quot;logger&quot;})</td></tr>
<tr><td class="h"><a id="L1295">1295</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if (open my $fin, &#39;&lt;&#39;, &#39;/etc/timezone&#39;) { }</td></tr>
<tr><td class="h"><a id="L1304">1304</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">unless (defined $$self{&quot;_timezone&quot;})</td></tr>
<tr><td class="h"><a id="L1315">1315</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">unless $code</td></tr>
<tr><td class="h"><a id="L1316">1316</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">if (defined $$self{&#39;_country&#39;}) { }</td></tr>
<tr><td class="h"><a id="L1321">1321</a></td><td class="c0">50</td><td class="c3">T</td><td class="c0">F</td><td class="s">unless ($$self{&quot;_cache&quot;})</td></tr>
<tr><td class="h"><a id="L1324">1324</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if (my $from_cache = $$self{&quot;_cache&quot;}-&gt;get(&#39;CGI::Lingua&#39; . &quot;:code2language:$code&quot;))</td></tr>
<tr><td class="h"><a id="L1337">1337</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">unless $code</td></tr>
<tr><td class="h"><a id="L1338">1338</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">if ($$self{&#39;_country&#39;}) { }</td></tr>
<tr><td class="h"><a id="L1344">1344</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if (not $_[0] =~ /No result found in country table/)</td></tr>
<tr><td class="h"><a id="L1359">1359</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">unless $code</td></tr>
<tr><td class="h"><a id="L1361">1361</a></td><td class="c0">50</td><td class="c3">T</td><td class="c0">F</td><td class="s">unless ($$self{&quot;_cache&quot;})</td></tr>
<tr><td class="h"><a id="L1363">1363</a></td><td class="c0">50</td><td class="c3">T</td><td class="c0">F</td><td class="s">if (defined $country)</td></tr>
<tr><td class="h"><a id="L1368">1368</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if (my $from_cache = $$self{&quot;_cache&quot;}-&gt;get(&#39;CGI::Lingua&#39; . &quot;:code2countryname:$code&quot;))</td></tr>
<tr><td class="h"><a id="L1372">1372</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if (my $country = $self-&gt;_code2country($code))</td></tr>
<tr><td class="h"><a id="L1385">1385</a></td><td class="c0">50</td><td class="c3">T</td><td class="c0">F</td><td class="s">if (scalar @messages)</td></tr>
<tr><td class="h"><a id="L1391">1391</a></td><td class="c0">50</td><td class="c3">T</td><td class="c0">F</td><td class="s">if (my $logger = $$self{&quot;logger&quot;})</td></tr>
<tr><td class="h"><a id="L1421">1421</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if (defined $$self{&#39;logger&#39;}) { }</td></tr>
</table>
</body>
</html>
